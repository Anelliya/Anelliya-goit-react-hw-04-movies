(this["webpackJsonpgoit-react-hw-04-movies"]=this["webpackJsonpgoit-react-hw-04-movies"]||[]).push([[2,5],{66:function(e,t,r){"use strict";r.r(t);var n=r(1);t.default=function(){return Object(n.jsx)("p",{className:"error-title",children:"404 Page not found"})}},67:function(e,t,r){"use strict";var n=r(68),a=r(12);function o(e,t){return t.encode?t.strict?n(e):encodeURIComponent(e):e}function c(e){return Array.isArray(e)?e.sort():"object"===typeof e?c(Object.keys(e)).sort((function(e,t){return Number(e)-Number(t)})).map((function(t){return e[t]})):e}t.extract=function(e){return e.split("?")[1]||""},t.parse=function(e,t){var r=function(e){var t;switch(e.arrayFormat){case"index":return function(e,r,n){t=/\[(\d*)\]$/.exec(e),e=e.replace(/\[\d*\]$/,""),t?(void 0===n[e]&&(n[e]={}),n[e][t[1]]=r):n[e]=r};case"bracket":return function(e,r,n){t=/(\[\])$/.exec(e),e=e.replace(/\[\]$/,""),t?void 0!==n[e]?n[e]=[].concat(n[e],r):n[e]=[r]:n[e]=r};default:return function(e,t,r){void 0!==r[e]?r[e]=[].concat(r[e],t):r[e]=t}}}(t=a({arrayFormat:"none"},t)),n=Object.create(null);return"string"!==typeof e?n:(e=e.trim().replace(/^(\?|#|&)/,""))?(e.split("&").forEach((function(e){var t=e.replace(/\+/g," ").split("="),a=t.shift(),o=t.length>0?t.join("="):void 0;o=void 0===o?null:decodeURIComponent(o),r(decodeURIComponent(a),o,n)})),Object.keys(n).sort().reduce((function(e,t){var r=n[t];return Boolean(r)&&"object"===typeof r&&!Array.isArray(r)?e[t]=c(r):e[t]=r,e}),Object.create(null))):n},t.stringify=function(e,t){var r=function(e){switch(e.arrayFormat){case"index":return function(t,r,n){return null===r?[o(t,e),"[",n,"]"].join(""):[o(t,e),"[",o(n,e),"]=",o(r,e)].join("")};case"bracket":return function(t,r){return null===r?o(t,e):[o(t,e),"[]=",o(r,e)].join("")};default:return function(t,r){return null===r?o(t,e):[o(t,e),"=",o(r,e)].join("")}}}(t=a({encode:!0,strict:!0,arrayFormat:"none"},t));return e?Object.keys(e).sort().map((function(n){var a=e[n];if(void 0===a)return"";if(null===a)return o(n,t);if(Array.isArray(a)){var c=[];return a.slice().forEach((function(e){void 0!==e&&c.push(r(n,e,c.length))})),c.join("&")}return o(n,t)+"="+o(a,t)})).filter((function(e){return e.length>0})).join("&"):""}},68:function(e,t,r){"use strict";e.exports=function(e){return encodeURIComponent(e).replace(/[!'()*]/g,(function(e){return"%"+e.charCodeAt(0).toString(16).toUpperCase()}))}},70:function(e,t,r){"use strict";r.r(t);var n=r(17),a=r(18),o=r(20),c=r(19),i=r(8),s=r(0),u=r(67),l=r.n(u),h=r(11),p=r.n(h),f=function(e,t){return p.a.defaults.baseURL="https://api.themoviedb.org/3/search/movie?",p.a.defaults.params={api_key:"50b81e1c6c3b9e5f74d2015b742ff0b0"},p.a.get("",{params:{query:e,page:t}}).then((function(e){return e.data.results}))},d=r(66),m=r(21),g=r(1),v=function(e){Object(o.a)(r,e);var t=Object(c.a)(r);function r(){var e;Object(n.a)(this,r);for(var a=arguments.length,o=new Array(a),c=0;c<a;c++)o[c]=arguments[c];return(e=t.call.apply(t,[this].concat(o))).state={query:l.a.parse(e.props.location.state).query,movies:[],page:1,error:!1},e.setQuery=function(t){e.setState({query:t.target.value})},e.getMovies=function(t){var r=e.state,n=r.query,a=r.page,o=r.baseURL;t.preventDefault(),f(n,a,o).then((function(t){return t.length>1?e.setState({movies:t}):e.setState({error:!0})})).catch((function(e){console.log("err",e)})).finally(e.setState({movies:[]}))},e.handleRenderNextPage=function(){e.setState((function(e){return{page:e.page+1}}))},e.handleRenderPrevPage=function(){e.state.page>1&&e.setState((function(e){return{page:e.page-1}}))},e}return Object(a.a)(r,[{key:"componentDidMount",value:function(){var e=this,t=this.state,r=t.query,n=t.page,a=t.baseURL;this.setState({page:1,error:!1}),(null===r||void 0===r?void 0:r.length)>1&&f(r,n,a).then((function(t){return t.length>1?e.setState({movies:t}):e.setState({error:!0})})).catch((function(){return e.setState({error:!0})}))}},{key:"componentDidUpdate",value:function(e,t){var r=this;if(t.page!==this.state.page){var n=this.state,a=n.page,o=n.query,c=n.baseURL;f(o,a,c).then((function(e){return r.setState({movies:e})}))}t.query!==this.state.query&&this.setState({error:!1}),t.movies!==this.state.movies&&this.state.movies.length>1&&this.props.history.push({search:"query=".concat(this.state.query)})}},{key:"render",value:function(){var e=this,t=this.state,r=t.movies,n=t.page,a=t.error,o=t.query;return Object(g.jsxs)(g.Fragment,{children:[Object(g.jsxs)("form",{className:"Searchbar",children:[Object(g.jsx)("input",{type:"imput",onChange:this.setQuery,className:"SearchForm-input",placeholder:"Search..."}),Object(g.jsx)("button",{onClick:this.getMovies,className:"SearchForm-button",children:"Search"})]}),r.length>1&&Object(g.jsx)("ul",{className:"ImageGallery",children:r.map((function(t){var r=t.title,n=t.id,a=t.poster_path;return Object(g.jsx)("li",{children:Object(g.jsxs)(i.b,{to:{pathname:"".concat(e.props.match.url,"/").concat(n),state:"query=".concat(o),from:"".concat(e.props.location.pathname)},children:[Object(g.jsx)("img",{src:a?"https://image.tmdb.org/t/p/w500/".concat(a):m.a,alt:"",className:"ImageGalleryItem-image"}),Object(g.jsx)("p",{children:r})]})},n)}))}),a&&Object(g.jsx)(d.default,{}),Object(g.jsxs)("div",{className:"Navigation-button-wrapper",children:[r.length>1&&Object(g.jsx)("button",{onClick:this.handleRenderNextPage,className:"Navigation-button",children:"Next page"}),n>1&&Object(g.jsx)("button",{onClick:this.handleRenderPrevPage,className:"Navigation-button",children:"Prev page"})]})]})}}]),r}(s.Component);t.default=v}}]);
//# sourceMappingURL=movie-page.c1c4f3a8.chunk.js.map